<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Recruitment Notifications — Body-wise (Tentative)</title>
<meta name="description" content="Tentative notification calendar for recruitment exams, grouped by recruitment body.">
<link rel="manifest" href="manifest.webmanifest">
<meta name="theme-color" content="#0f1220" />
<link rel="icon" href="assets/icon-192.png" />
<link rel="apple-touch-icon" href="assets/icon-192.png" />
<link rel="stylesheet" href="css/style.css" />
</head>
<body>
<header class="wrap">
  <h1>Recruitment Notifications — <span class="badge">Body-wise • Tentative</span></h1>
  <div class="kv"><span class="badge">Only official links</span></div>
</header>

<div class="wrap">
  <div class="controls">
    <input id="q" type="search" placeholder="Search exam / cycle / notes…" autocomplete="off" />
    <select id="body"><option value="__all__">All bodies</option></select>

    <!-- Govt. Level filter -->
    <select id="level">
      <option value="__all__">All levels</option>
      <option value="central">Central Govt.</option>
      <option value="state">State Govt.</option>
      <option value="local">Local Govt.</option>
    </select>

    <!-- State/UT filter (used for State/Local) -->
    <select id="region"><option value="__all__">All States/UT</option></select>

    <!-- NEW: Local Type filter (used for Local) -->
    <select id="localType">
      <option value="__all__">All local types</option>
      <option value="municipal_corporation">Municipal Corporation</option>
      <option value="zilla_parishad">Zilla Parishad</option>
      <option value="municipality">Municipality</option>
      <option value="panchayat_samiti">Panchayat Samiti</option>
      <option value="gram_panchayat">Gram Panchayat</option>
      <option value="other">Other</option>
    </select>

    <select id="window">
      <option value="__all__">Any window</option>
      <option value="date">Exact date</option>
      <option value="month">Month</option>
      <option value="quarter">Quarter</option>
      <option value="half">Half-year</option>
      <option value="tbd">TBD</option>
    </select>

    <div class="btn-row">
      <button class="btn" id="addBody" title="Create a new recruitment body">Add Body</button>
      <button class="btn ghost" id="toggleAdmin" title="Local, device-only edits">Admin Mode</button>
      <button class="btn" id="exportCsv">Export CSV</button>
      <button class="btn ghost" id="exportJson">Export App Data</button>
      <label class="btn ghost filelike">
        Import App Data
        <input id="importJson" type="file" accept="application/json" hidden />
      </label>
    </div>
  </div>

  <div id="mount"></div>

  <p class="small">
    Tip: Press <kbd>/</kbd> to focus search. Admin additions/edits/deletions are saved locally (this device).  
    For permanent changes, edit <code>data/exams.json</code> in GitHub.
  </p>

  <hr class="sep">

  <details>
    <summary class="small">About & disclaimer</summary>
    <p class="small">All timelines here are <strong>tentative</strong>. Always verify on the respective body’s official website (links provided). No scraping or auto-refresh happens in this app.</p>
  </details>
</div>

<footer class="wrap">
  <div>Last updated: <span id="updated"></span></div>
  <div class="small">PWA • Offline-ready • Works on iPad/GitHub Pages</div>
</footer>

<!-- Add / Edit dialog (Admin Mode) -->
<dialog id="editDlg">
  <header><strong id="dlgTitle">Add entry</strong></header>
  <form id="editForm" method="dialog">
    <div>
      <label>Recruitment Body</label>
      <input name="body" required placeholder="e.g., SSC, UPSC, IBPS, RRB, MPSC">
    </div>
    <div>
      <label>Exam (Name)</label>
      <input name="exam" required placeholder="e.g., CGL, Civil Services, PO/MT">
    </div>
    <div>
      <label>Cycle / Year</label>
      <input name="cycle" placeholder="e.g., 2025, 2025–26">
    </div>

    <!-- Level + Region (State/UT or Local area) -->
    <div>
      <label>Govt. Level</label>
      <select name="level">
        <option value="central">Central Govt.</option>
        <option value="state">State Govt.</option>
        <option value="local">Local Govt.</option>
      </select>
    </div>
    <div data-slot-level="region">
      <label>State/UT or Local area</label>
      <input name="region" placeholder="e.g., Maharashtra / BMC / Pune">
    </div>

    <!-- NEW: Local govt. type (visible only when Level = Local) -->
    <div data-slot-level="orgtype" style="display:none">
      <label>Local govt. type</label>
      <select name="orgtype">
        <option value="municipal_corporation">Municipal Corporation</option>
        <option value="zilla_parishad">Zilla Parishad</option>
        <option value="municipality">Municipality</option>
        <option value="panchayat_samiti">Panchayat Samiti</option>
        <option value="gram_panchayat">Gram Panchayat</option>
        <option value="other">Other</option>
      </select>
    </div>

    <div>
      <label>Window Type</label>
      <select name="wtype">
        <option value="date">Exact date</option>
        <option value="month">Month</option>
        <option value="quarter">Quarter (Q1–Q4)</option>
        <option value="half">Half-year (H1/H2)</option>
        <option value="tbd">TBD</option>
      </select>
    </div>
    <div data-slot="date">
      <label>Exact Date</label>
      <input type="date" name="date">
    </div>
    <div data-slot="month" style="display:none">
      <label>Month</label>
      <input type="month" name="month">
    </div>
    <div data-slot="quarter" style="display:none">
      <label>Quarter & Year</label>
      <div class="inline">
        <select name="q">
          <option value="Q1">Q1</option><option value="Q2">Q2</option>
          <option value="Q3">Q3</option><option value="Q4">Q4</option>
        </select>
        <input type="number" name="qy" min="2020" max="2100" value="2025">
      </div>
    </div>
    <div data-slot="half" style="display:none">
      <label>Half & Year</label>
      <div class="inline">
        <select name="h">
          <option value="H1">H1</option><option value="H2">H2</option>
        </select>
        <input type="number" name="hy" min="2020" max="2100" value="2025">
      </div>
    </div>

    <div class="full">
      <label>Past notifications (comma-separated)</label>
      <input name="history" placeholder="YYYY-MM-DD, YYYY-MM, or YYYY">
    </div>

    <div class="full">
      <label>Official Link (must be official domain)</label>
      <input name="official" required placeholder="https://… (gov.in / nic.in / official)">
    </div>
    <div class="full">
      <label>Notes</label>
      <textarea name="notes" rows="2" placeholder="e.g., based on previous cycle pattern / press note"></textarea>
    </div>
    <div class="actions">
      <button class="btn ghost" value="cancel">Cancel</button>
      <button class="btn" value="submit">Save</button>
    </div>
  </form>
</dialog>

<script defer src="js/app.js"></script>
<script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => navigator.serviceWorker.register('./sw.js').catch(()=>{}));
  }
</script>
</body>
</html>

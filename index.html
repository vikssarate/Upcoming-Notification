<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Recruitment Notifications — Body-wise (Tentative)</title>
<meta name="description" content="Tentative notification calendar for recruitment exams, grouped by recruitment body.">
<style>
:root{
  --bg:#0f1220; --card:#171b2b; --ink:#eef1ff; --muted:#a3acd0; --line:#2a3052; --accent:#72a3ff;
  --ok:#79e08e; --warn:#ffd166; --bad:#ff7b7b;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; background:var(--bg); color:var(--ink);
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, "Helvetica Neue", Arial;
}
header,footer{padding:12px 16px; display:flex; align-items:center; gap:12px; flex-wrap:wrap}
header h1{margin:0; font-size:18px; font-weight:700}
.wrap{max-width:1100px; margin:0 auto; padding:12px}
.controls{
  display:grid; grid-template-columns: 1fr 170px 170px auto; gap:10px; align-items:center
}
input[type="search"], select{
  width:100%; padding:10px 12px; border-radius:10px; border:1px solid var(--line);
  background:var(--card); color:var(--ink); outline:none;
}
.btn{
  appearance:none; border:none; padding:10px 12px; border-radius:10px; cursor:pointer; font-weight:600;
  background:var(--accent); color:#0b1222; box-shadow:0 0 0 1px #0003;
}
.btn.ghost{ background:transparent; color:var(--ink); border:1px solid var(--line)}
.badge{display:inline-block; padding:2px 8px; border-radius:999px; font-size:12px; background:#233; color:var(--muted); border:1px solid var(--line)}
.group{
  margin-top:18px; border-radius:14px; overflow:hidden; border:1px solid var(--line)
}
.group>h2{
  margin:0; padding:10px 14px; background:#12162a; color:#cfe0ff; font-size:14px; letter-spacing:.2px;
  display:flex; align-items:center; gap:8px; justify-content:space-between
}
.table{width:100%; border-collapse:separate; border-spacing:0}
.table th, .table td{padding:10px 12px; text-align:left; border-bottom:1px solid var(--line)}
.table th{font-size:12px; color:var(--muted); background:#11162a; position:sticky; top:0; z-index:1}
.row-actions a, .row-actions button{
  margin-right:8px; text-decoration:none; font-size:12px; padding:6px 8px; border-radius:8px; border:1px solid var(--line);
  background:#12182e; color:var(--ink); display:inline-flex; align-items:center; gap:6px; cursor:pointer
}
.kv{display:inline-flex; gap:4px; align-items:center}
kbd{
  background:#000; color:#fff; padding:2px 6px; border-radius:6px; border:1px solid #333; font-size:12px
}
footer{justify-content:space-between; color:var(--muted); border-top:1px solid var(--line)}
hr.sep{border:0; border-top:1px dashed var(--line); margin:14px 0}

dialog{
  border:1px solid var(--line); border-radius:12px; background:var(--card); color:var(--ink); width:min(680px, 92vw); padding:0;
}
dialog header{padding:12px 14px; border-bottom:1px solid var(--line)}
dialog form{padding:12px 14px; display:grid; grid-template-columns: 1fr 1fr; gap:10px}
dialog form .full{grid-column:1/-1}
dialog label{font-size:12px; color:var(--muted)}
dialog input, dialog select, dialog textarea{
  width:100%; padding:10px 12px; border-radius:10px; border:1px solid var(--line);
  background:#0f1427; color:var(--ink); outline:none;
}
dialog .actions{display:flex; justify-content:flex-end; gap:10px; padding:12px 14px; border-top:1px solid var(--line)}
.empty{
  padding:20px; color:var(--muted); font-size:14px; border-top:1px dashed var(--line); background:#0f1427
}
.small{font-size:12px; color:var(--muted)}
@media (max-width:800px){
  .controls{grid-template-columns: 1fr 1fr; }
}
</style>
</head>
<body>
<header class="wrap">
  <h1>Recruitment Notifications — <span class="badge">Body-wise • Tentative</span></h1>
  <div class="kv"><span class="badge">Only official links</span></div>
</header>

<div class="wrap">
  <div class="controls">
    <input id="q" type="search" placeholder="Search exam / cycle / notes…" autocomplete="off" />
    <select id="body">
      <option value="__all__">All bodies</option>
    </select>
    <select id="window">
      <option value="__all__">Any window</option>
      <option value="date">Exact date</option>
      <option value="month">Month</option>
      <option value="quarter">Quarter</option>
      <option value="half">Half-year</option>
      <option value="tbd">TBD</option>
    </select>
    <div style="display:flex; gap:8px; justify-content:flex-end">
      <button class="btn ghost" id="toggleAdmin" title="Local, device-only edits">Admin Mode</button>
      <button class="btn" id="exportCsv">Export CSV</button>
    </div>
  </div>

  <div id="mount"></div>

  <p class="small">Tip: Press <kbd>/</kbd> to focus search. Admin additions are saved to your device (localStorage). For permanent changes, edit the dataset in the file.</p>

  <hr class="sep">

  <details>
    <summary class="small">About & disclaimer</summary>
    <p class="small">All timelines here are <strong>tentative</strong>. Always verify on the respective body’s official website (links provided). No scraping or auto-refresh happens in this file.</p>
  </details>
</div>

<footer class="wrap">
  <div>Last updated: <span id="updated"></span></div>
  <div class="small">Made for fast iPad/GitHub Pages use • Works offline (no server)</div>
</footer>

<!-- Add / Edit dialog (Admin Mode) -->
<dialog id="editDlg">
  <header><strong id="dlgTitle">Add entry</strong></header>
  <form id="editForm" method="dialog">
    <div>
      <label>Recruitment Body</label>
      <input name="body" required placeholder="e.g., SSC, UPSC, IBPS, RRB, MPSC">
    </div>
    <div>
      <label>Exam (Name)</label>
      <input name="exam" required placeholder="e.g., CGL, Civil Services, PO/MT">
    </div>
    <div>
      <label>Cycle / Year</label>
      <input name="cycle" placeholder="e.g., 2025, 2025–26">
    </div>
    <div>
      <label>Window Type</label>
      <select name="wtype">
        <option value="date">Exact date</option>
        <option value="month">Month</option>
        <option value="quarter">Quarter (Q1–Q4)</option>
        <option value="half">Half-year (H1/H2)</option>
        <option value="tbd">TBD</option>
      </select>
    </div>
    <div data-slot="date">
      <label>Exact Date</label>
      <input type="date" name="date">
    </div>
    <div data-slot="month" style="display:none">
      <label>Month</label>
      <input type="month" name="month">
    </div>
    <div data-slot="quarter" style="display:none">
      <label>Quarter & Year</label>
      <div style="display:flex; gap:8px">
        <select name="q">
          <option value="Q1">Q1</option><option value="Q2">Q2</option><option value="Q3">Q3</option><option value="Q4">Q4</option>
        </select>
        <input type="number" name="qy" min="2020" max="2100" value="2025" style="width:120px">
      </div>
    </div>
    <div data-slot="half" style="display:none">
      <label>Half & Year</label>
      <div style="display:flex; gap:8px">
        <select name="h">
          <option value="H1">H1</option><option value="H2">H2</option>
        </select>
        <input type="number" name="hy" min="2020" max="2100" value="2025" style="width:120px">
      </div>
    </div>
    <div class="full">
      <label>Official Link (must be official domain)</label>
      <input name="official" required placeholder="https://… .gov.in / .nic.in / official domain">
    </div>
    <div class="full">
      <label>Notes</label>
      <textarea name="notes" rows="2" placeholder="e.g., based on previous cycle pattern / press note"></textarea>
    </div>
    <div class="actions">
      <button class="btn ghost" value="cancel">Cancel</button>
      <button class="btn" value="submit">Save</button>
    </div>
  </form>
</dialog>

<script>
/* ------------------------ Seed dataset (edit these) ------------------------ */
const EXAMS = [
  // SSC
  {id:"ssc-cgl-2025", body:"SSC", exam:"Combined Graduate Level (CGL)", cycle:"2025", window:{type:"month", month:"2025-05"}, official:"https://ssc.gov.in", notes:"Tentative window based on prior cycles."},
  {id:"ssc-chsl-2025", body:"SSC", exam:"CHSL (10+2)", cycle:"2025", window:{type:"month", month:"2025-04"}, official:"https://ssc.gov.in", notes:"Month indicative."},
  {id:"ssc-je-2026", body:"SSC", exam:"Junior Engineer (JE)", cycle:"2026", window:{type:"quarter", q:"Q1", year:2026}, official:"https://ssc.gov.in", notes:"Quarter target."},

  // UPSC
  {id:"upsc-ias-2026", body:"UPSC", exam:"Civil Services (Prelims) – Notification", cycle:"2026", window:{type:"month", month:"2025-12"}, official:"https://upsc.gov.in", notes:"UPSC calendar patterns."},
  {id:"upsc-nda1-2026", body:"UPSC", exam:"NDA & NA (I) – Notification", cycle:"2026", window:{type:"month", month:"2025-12"}, official:"https://upsc.gov.in", notes:"Indicative."},

  // IBPS
  {id:"ibps-po-2025", body:"IBPS", exam:"PO/MT – Notification", cycle:"2025", window:{type:"month", month:"2025-07"}, official:"https://www.ibps.in", notes:"Usual July/August window."},
  {id:"ibps-clerk-2025", body:"IBPS", exam:"Clerk – Notification", cycle:"2025", window:{type:"month", month:"2025-06"}, official:"https://www.ibps.in"},

  // RRB
  {id:"rrb-ntpc-2025", body:"RRB", exam:"NTPC – Notification", cycle:"2025", window:{type:"half", half:"H1", year:2025}, official:"https://rrbcdg.gov.in", notes:"Centralised RRB portal."},
  {id:"rrb-groupd-2025", body:"RRB", exam:"Group D – Notification", cycle:"2025", window:{type:"half", half:"H2", year:2025}, official:"https://rrbcdg.gov.in"},

  // State PSC — MPSC
  {id:"mpsc-cse-2025", body:"MPSC", exam:"Combined (Rajyaseva) – Notification", cycle:"2025", window:{type:"quarter", q:"Q4", year:2025}, official:"https://mpsc.gov.in"},
  {id:"mpsc-combined-2025", body:"MPSC", exam:"Group B/C Combined – Notification", cycle:"2025", window:{type:"quarter", q:"Q1", year:2026}, official:"https://mpsc.gov.in", notes:"For 2025–26 cycle."},

  // BPSC
  {id:"bpsc-cce-2025", body:"BPSC", exam:"Combined Competitive Exam (CCE) – Notification", cycle:"2025", window:{type:"quarter", q:"Q3", year:2025}, official:"https://www.bpsc.bih.nic.in"},

  // TNPSC
  {id:"tnpsc-group1-2025", body:"TNPSC", exam:"Group I – Notification", cycle:"2025", window:{type:"tbd"}, official:"https://www.tnpsc.gov.in", notes:"Awaiting calendar."},

  // Exact date example
  {id:"ssc-mts-2025", body:"SSC", exam:"MTS – Notification", cycle:"2025", window:{type:"date", date:"2025-03-10"}, official:"https://ssc.gov.in"},

  // Add a few placeholders user can delete
  {id:"upsc-ees-2025", body:"UPSC", exam:"Engineering Services (ESE) – Notification", cycle:"2026", window:{type:"month", month:"2025-09"}, official:"https://upsc.gov.in"},
  {id:"ibps-rrb-2026", body:"IBPS", exam:"RRB (PO/Clerk) – Notification", cycle:"2026", window:{type:"month", month:"2026-06"}, official:"https://www.ibps.in"},
];

/* ------------------------ Local state & helpers ------------------------ */
const $ = sel => document.querySelector(sel);
const mount = $("#mount");
const q = $("#q");
const bodySel = $("#body");
const windowSel = $("#window");
const updated = $("#updated");
const toggleAdminBtn = $("#toggleAdmin");
const editDlg = $("#editDlg");
const editForm = $("#editForm");

const ADMIN = {enabled:false};
const LSK = "recruit_bodywise_userItems_v1";

function getUserItems(){
  try{ return JSON.parse(localStorage.getItem(LSK) || "[]"); }catch(e){ return []; }
}
function setUserItems(items){
  localStorage.setItem(LSK, JSON.stringify(items));
}

function normalizeItems(){
  return [...EXAMS, ...getUserItems()];
}

function uniqueBodies(items){
  return [...new Set(items.map(x=>x.body))].sort((a,b)=>a.localeCompare(b));
}

function labelWindow(w){
  if(!w||!w.type) return "TBD";
  switch(w.type){
    case "date": return new Date(w.date+"T00:00:00").toLocaleDateString(undefined,{year:"numeric",month:"short",day:"2-digit"});
    case "month": {
      const [y,m]=w.month.split("-").map(Number);
      const d=new Date(y, m-1, 1);
      return d.toLocaleDateString(undefined,{year:"numeric",month:"long"});
    }
    case "quarter": return `${w.q} ${w.year}`;
    case "half": return `${w.half} ${w.year}`;
    case "tbd": return "TBD";
    default: return "TBD";
  }
}

function sortKey(w){
  // For grouping/sorting chronologically, approximate windows to a date
  if(!w) return 9e12;
  if(w.type==="date") return +new Date(w.date+"T00:00:00");
  if(w.type==="month"){
    const [y,m]=w.month.split("-").map(Number);
    return +new Date(y, m-1, 1);
  }
  if(w.type==="quarter"){
    const qmap={Q1:0, Q2:3, Q3:6, Q4:9}; // first day of quarter
    return +new Date(w.year, qmap[w.q]??0, 1);
  }
  if(w.type==="half"){
    const hmap={H1:0, H2:6};
    return +new Date(w.year, hmap[w.half]??0, 1);
  }
  return 9e12;
}

function makeICS(item){
  // Build a minimal .ics for the notification date/window (approximate if not exact)
  const ts = (() => {
    const s = sortKey(item.window);
    const d = isFinite(s)? new Date(s) : new Date();
    // 09:00 local
    const y=d.getFullYear();
    const m=String(d.getMonth()+1).padStart(2,"0");
    const day=String(item.window?.type==="date" ? new Date(item.window.date).getDate() : 1).padStart(2,"0");
    return `${y}${m}${day}T090000`;
  })();

  const summary = `${item.body}: ${item.exam} (${item.cycle}) — Tentative Notification`;
  const desc = `Tentative notification window: ${labelWindow(item.window)}. Verify on official site: ${item.official}`;
  const uid = `${item.id}@recruit-bodywise.local`;
  const dtend = (()=>{ // 1 hour after
    const s = new Date(sortKey(item.window));
    if(!isFinite(+s)) return ts;
    s.setHours(10);
    const y=s.getFullYear(), m=String(s.getMonth()+1).padStart(2,"0"), d=String(s.getDate()).padStart(2,"0");
    return `${y}${m}${d}T100000`;
  })();

  const ics = [
    "BEGIN:VCALENDAR","VERSION:2.0","PRODID:-//Recruit Bodywise//EN",
    "BEGIN:VEVENT",
    `UID:${uid}`,
    `DTSTAMP:${ts}`,
    `DTSTART:${ts}`,
    `DTEND:${dtend}`,
    `SUMMARY:${summary}`,
    `DESCRIPTION:${desc.replace(/\n/g," ")}`,
    "END:VEVENT","END:VCALENDAR"
  ].join("\r\n");

  const blob = new Blob([ics], {type:"text/calendar"});
  const url = URL.createObjectURL(blob);
  return url;
}

function toCSV(rows){
  const esc = s => `"${String(s??"").replace(/"/g,'""')}"`;
  const head = ["Body","Exam","Cycle","Window","Official","Notes"];
  const lines = [head.map(esc).join(",")];
  rows.forEach(r=>{
    lines.push([r.body, r.exam, r.cycle||"", labelWindow(r.window), r.official||"", r.notes||""].map(esc).join(","));
  });
  return lines.join("\r\n");
}

/* ------------------------ Rendering ------------------------ */
function render(){
  const items = normalizeItems()
    .filter(x=>{
      if(windowSel.value!=="__all__" && (x.window?.type||"tbd")!==windowSel.value) return false;
      if(bodySel.value!=="__all__" && x.body!==bodySel.value) return false;
      const s = `${x.body} ${x.exam} ${x.cycle||""} ${x.notes||""}`.toLowerCase();
      return s.includes(q.value.trim().toLowerCase());
    })
    .sort((a,b)=> sortKey(a.window)-sortKey(b.window) || a.body.localeCompare(b.body) || a.exam.localeCompare(b.exam));

  // Group by body
  const groups = {};
  items.forEach(it => {
    (groups[it.body] ||= []).push(it);
  });

  // Inject body filter options
  const bodies = uniqueBodies(normalizeItems());
  bodySel.innerHTML = `<option value="__all__">All bodies</option>` + bodies.map(b=>`<option value="${b}">${b}</option>`).join("");
  if(currentFilters.body && bodies.includes(currentFilters.body)) bodySel.value=currentFilters.body;

  // Build DOM
  if(!items.length){
    mount.innerHTML = `<div class="empty">No matches. Try clearing filters.</div>`;
    return;
  }
  const frag = document.createDocumentFragment();

  Object.keys(groups).sort((a,b)=>a.localeCompare(b)).forEach(groupName=>{
    const group = document.createElement("section");
    group.className = "group";
    const title = document.createElement("h2");
    title.innerHTML = `<span>${groupName}</span><span class="small">${groups[groupName].length} item(s)</span>`;
    group.appendChild(title);

    const table = document.createElement("table");
    table.className = "table";
    table.innerHTML = `
      <thead><tr>
        <th>Exam</th><th>Cycle</th><th>Window (Tentative)</th><th>Official</th><th style="min-width:210px">Actions</th>
      </tr></thead>
      <tbody></tbody>
    `;
    const tbody = table.querySelector("tbody");

    groups[groupName].forEach(item=>{
      const tr = document.createElement("tr");
      tr.innerHTML = `
        <td><div style="font-weight:600">${item.exam}</div><div class="small">${item.notes? item.notes: ""}</div></td>
        <td>${item.cycle||""}</td>
        <td>${labelWindow(item.window)}</td>
        <td><a href="${item.official}" target="_blank" rel="noopener" class="badge">Official</a></td>
        <td class="row-actions">
          <a href="${makeICS(item)}" download="${item.id}.ics" title="Add to Calendar">Add to Calendar</a>
          ${ADMIN.enabled && item.id.startsWith("user-") ? `<button data-act="del" data-id="${item.id}" title="Delete (local)">Delete</button>` : ""}
          ${ADMIN.enabled && item.id.startsWith("user-") ? `<button data-act="edit" data-id="${item.id}" title="Edit (local)">Edit</button>` : ""}
        </td>
      `;
      tbody.appendChild(tr);
    });

    group.appendChild(table);

    if(ADMIN.enabled){
      const bar = document.createElement("div");
      bar.style = "display:flex; gap:8px; padding:10px 12px; background:#0f1427; border-top:1px solid var(--line)";
      const addBtn = document.createElement("button");
      addBtn.className = "btn";
      addBtn.textContent = `Add under ${groupName}`;
      addBtn.onclick = ()=> openEditor({body:groupName});
      const resetBtn = document.createElement("button");
      resetBtn.className = "btn ghost";
      resetBtn.textContent = "Reset local additions";
      resetBtn.onclick = ()=>{
        if(confirm("Remove all locally added/edited entries?")){
          setUserItems([]);
          render();
        }
      };
      bar.append(addBtn, resetBtn);
      group.appendChild(bar);
    }

    frag.appendChild(group);
  });

  mount.innerHTML = "";
  mount.appendChild(frag);

  // Row action handlers (delete/edit)
  mount.querySelectorAll("[data-act]").forEach(btn=>{
    btn.addEventListener("click", ()=>{
      const id = btn.getAttribute("data-id");
      const act = btn.getAttribute("data-act");
      if(act==="del"){
        const items = getUserItems().filter(x=>x.id!==id);
        setUserItems(items);
        render();
      } else if(act==="edit"){
        const item = getUserItems().find(x=>x.id===id);
        if(item) openEditor(item);
      }
    });
  });
}

const currentFilters = { body: "__all__" };

/* ------------------------ Events ------------------------ */
q.addEventListener("input", render);
windowSel.addEventListener("change", render);
bodySel.addEventListener("change", e=>{ currentFilters.body = e.target.value; render(); });
updated.textContent = new Date().toLocaleString();

document.addEventListener("keydown", (ev)=>{
  if(ev.key === "/"){ ev.preventDefault(); q.focus(); }
});

$("#exportCsv").addEventListener("click", ()=>{
  const rows = normalizeItems()
    .filter(x=>{
      if(windowSel.value!=="__all__" && (x.window?.type||"tbd")!==windowSel.value) return false;
      if(bodySel.value!=="__all__" && x.body!==bodySel.value) return false;
      const s = `${x.body} ${x.exam} ${x.cycle||""} ${x.notes||""}`.toLowerCase();
      return s.includes(q.value.trim().toLowerCase());
    })
    .sort((a,b)=> sortKey(a.window)-sortKey(b.window) || a.body.localeCompare(b.body) || a.exam.localeCompare(b.exam));
  const csv = toCSV(rows);
  const blob = new Blob([csv], {type:"text/csv"});
  const a = document.createElement("a");
  a.href = URL.createObjectURL(blob);
  a.download = "recruitment_notifications_bodywise.csv";
  a.click();
  URL.revokeObjectURL(a.href);
});

toggleAdminBtn.addEventListener("click", ()=>{
  ADMIN.enabled = !ADMIN.enabled;
  toggleAdminBtn.classList.toggle("ghost", !ADMIN.enabled);
  toggleAdminBtn.textContent = ADMIN.enabled ? "Admin Mode: ON" : "Admin Mode";
  render();
});

/* ------------------------ Editor (Admin) ------------------------ */
function openEditor(seed={}){
  $("#dlgTitle").textContent = seed.id ? "Edit entry" : "Add entry";
  editForm.reset();
  // prefill
  editForm.body.value = seed.body || "";
  editForm.exam.value = seed.exam || "";
  editForm.cycle.value = seed.cycle || "";
  editForm.official.value = seed.official || "";
  editForm.notes.value = seed.notes || "";
  const w = seed.window || {type:"date"};
  editForm.wtype.value = w.type || "date";
  setWindowSlots(w.type);
  if(w.type==="date" && w.date) editForm.date.value = w.date;
  if(w.type==="month" && w.month) editForm.month.value = w.month;
  if(w.type==="quarter"){ editForm.q.value = w.q||"Q1"; editForm.qy.value = w.year||2025; }
  if(w.type==="half"){ editForm.h.value = w.half||"H1"; editForm.hy.value = w.year||2025; }

  editDlg.returnValue = "";
  editDlg.showModal();

  editForm.onsubmit = (e)=>{
    e.preventDefault();
    const body = editForm.body.value.trim();
    const exam = editForm.exam.value.trim();
    const cycle = editForm.cycle.value.trim();
    const official = editForm.official.value.trim();
    const notes = editForm.notes.value.trim();
    const wtype = editForm.wtype.value;

    if(!body || !exam || !official){ alert("Body, Exam, and Official link are required."); return; }
    const window = (()=> {
      if(wtype==="date"){ if(!editForm.date.value) return {type:"tbd"}; return {type:"date", date: editForm.date.value}; }
      if(wtype==="month"){ if(!editForm.month.value) return {type:"tbd"}; return {type:"month", month: editForm.month.value}; }
      if(wtype==="quarter"){ return {type:"quarter", q: editForm.q.value, year: Number(editForm.qy.value)||2025}; }
      if(wtype==="half"){ return {type:"half", half: editForm.h.value, year: Number(editForm.hy.value)||2025}; }
      return {type:"tbd"};
    })();

    const userItems = getUserItems();
    if(seed.id){ // update
      const idx = userItems.findIndex(x=>x.id===seed.id);
      if(idx>-1){
        userItems[idx] = { ...userItems[idx], body, exam, cycle, window, official, notes };
      }
    } else {
      const id = `user-${Date.now().toString(36)}`;
      userItems.push({ id, body, exam, cycle, window, official, notes });
    }
    setUserItems(userItems);
    editDlg.close();
    render();
  };
}

editForm.wtype.addEventListener("change", (e)=> setWindowSlots(e.target.value));
function setWindowSlots(type){
  editForm.querySelectorAll("[data-slot]").forEach(el=> el.style.display="none");
  const map = {date:"[data-slot='date']", month:"[data-slot='month']", quarter:"[data-slot='quarter']", half:"[data-slot='half']"};
  const sel = map[type];
  if(sel) editForm.querySelector(sel).style.display = "";
}

/* ------------------------ Init ------------------------ */
(function init(){
  // Persist current filter body across renders
  currentFilters.body = "__all__";
  render();
})();
</script>
</body>
</html>
